import{u as v,j as m,k as e,af as ge,ag as pe,Z as be,I as Ne,ah as we,l as $,O as ye,m as ve,L as ke,M as J,P as z,a3 as Y,a4 as B}from"./index-f5f5480a.js";import{a as k,u as A,D as P,a3 as I,m as U,n as M,o as L,B as u,q as T,av as Ce,aw as Fe,ax as Se,ay as y,az as S,aA as _,aB as O,$ as $e,ac as W,K as Ae,O as ze,T as Ve,aC as Ee,aD as Pe,aE as Ie,aF as Ue,aG as Me,aH as X,aI as D,aJ as ee,aK as se,aL as te,aM as ae,aN as Le,aO as Te,aP as _e,aQ as Oe,i as G,aR as re,aS as le,j as b,aT as We,aU as qe,aV as ne,S as V,L as ie,al as Ye,a6 as Be,C,d as F,af as Re,ag as Ge,ah as He,g as Q,aW as K,f as E,h as R,aX as Qe,am as Ke,an as Ze,ao as Je,ap as Xe,aq as De,ar as es,as as ss,at as ts}from"./App-70e4220f.js";function as(){var x,h,o,j,d,N;const s=v(),{mutate:l}=k(),[a,c]=m.useState(""),[i,f]=m.useState(),[t,n]=m.useState(""),{id:g}=A(),r=s.getQueryData(["profile",g]);m.useEffect(()=>{navigator.geolocation.getCurrentPosition(w=>f(w.coords))},[]);function p(w){if(w.preventDefault(),!a)return n("Invalid zip code (eg. 4010 for Pila, 4010 Laguna, Philippines)");l({address:a}),n("")}return e.jsxs(P,{children:[e.jsxs(I,{className:`w-full border font-medium hover:bg-[#e9e9e9] ${(x=r==null?void 0:r.data)!=null&&x.user.address?"text-xs":"text-sm"}
           flex items-center justify-start rounded py-8 pl-4 pr-6 shadow-md`,children:[e.jsx("span",{className:"mr-2",children:e.jsx(ge,{color:"black",width:25,height:25})}),e.jsx("p",{className:"text-gray-600",children:(h=r==null?void 0:r.data)!=null&&h.user.address?`Where I live: ${(o=r==null?void 0:r.data)==null?void 0:o.user.address}`:"Where I live"})]}),e.jsxs(U,{className:"p-8",children:[e.jsx(M,{children:e.jsx(L,{className:"text-xl text-[#222222]",children:(j=r==null?void 0:r.data)!=null&&j.user.address?"Current address":"Where do you live?"})}),(d=r==null?void 0:r.data)!=null&&d.user.address?e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"mb-2 text-sm font-medium",children:(N=r==null?void 0:r.data)==null?void 0:N.user.address}),e.jsx("div",{className:"flex items-center gap-2 pt-2",children:e.jsx(u,{onClick:()=>{c(""),l({address:""})},className:"rounded-full bg-[#222222] font-medium text-white",size:"lg",variant:"secondary",children:"Delete"})})]}):e.jsxs("form",{onSubmit:p,className:"mt-4",children:[e.jsx(T,{className:"text-sm font-medium",htmlFor:"address",children:"Your current address"}),e.jsxs(Ce,{apiKey:Fe,children:[e.jsx("div",{className:"geo mb-1",children:e.jsx(Se,{biasByProximity:{lat:(i==null?void 0:i.latitude)??0,lon:(i==null?void 0:i.longitude)??0},limit:5,filterByCountryCode:["ph"],allowNonVerifiedHouseNumber:!1,skipIcons:!0,addDetails:!0,allowNonVerifiedStreet:!1,postprocessHook:w=>(c(`${w.properties.formatted}, ${w.properties.country_code.toUpperCase()}`),w.properties.formatted)})}),t&&e.jsx(y,{message:t})]}),e.jsx("div",{className:"flex items-center gap-2 pt-2",children:e.jsx(u,{className:"rounded-full bg-[#222222] font-medium text-white",size:"lg",variant:"secondary",children:"Save"})})]})]})]})}const rs=S.object({funFact:S.string().min(1,{message:"This field is required"}).max(25,{message:"Just write a short fact about you at least 25 characters"})});function ls(){var g,r,p,x,h,o;const{formState:{errors:s},handleSubmit:l,register:a}=_({defaultValues:{funFact:""},resolver:O(rs)}),c=v(),{mutate:i}=k(),{id:f}=A(),t=c.getQueryData(["profile",f]);function n(j){i({funFact:j.funFact})}return e.jsxs(P,{children:[e.jsxs(I,{className:`hover:bg-[#e9e9e9] w-full border font-medium ${(g=t==null?void 0:t.data)!=null&&g.user.funFact?"text-xs":"text-sm"}
           shadow-md flex justify-start items-center pl-4 pr-6 py-8 rounded`,children:[e.jsx("span",{className:"mr-2",children:e.jsx(pe,{color:"black",width:25,height:25})}),e.jsx("p",{className:"text-zinc-500",children:(r=t==null?void 0:t.data)!=null&&r.user.funFact?`Fun Fact about you: ${(p=t==null?void 0:t.data)==null?void 0:p.user.funFact}`:"My Fun Fact"})]}),e.jsxs(U,{className:"p-8",children:[e.jsx(M,{children:e.jsx(L,{className:"text-xl text-[#222222]",children:(x=t==null?void 0:t.data)!=null&&x.user.funFact?"Fun fact about you":"What's a fun fact about you?"})}),(h=t==null?void 0:t.data)!=null&&h.user.funFact?e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:(o=t==null?void 0:t.data)==null?void 0:o.user.funFact}),e.jsx("div",{className:"flex gap-2 items-center pt-2",children:e.jsx(u,{onClick:()=>i({funFact:""}),className:"bg-[#222222] text-white font-medium rounded-full",size:"lg",variant:"secondary",children:"Delete"})})]}):e.jsxs("form",{onSubmit:l(n),className:"mt-4",children:[e.jsx($e,{className:"text-sm font-medium",htmlFor:"funFact",children:"Your Fun Fact"}),e.jsx(W,{...a("funFact"),type:"text",id:"funFact",className:"mb-2"}),s.funFact&&e.jsx(y,{message:s.funFact.message}),e.jsx("div",{className:"flex gap-2 items-center pt-2",children:e.jsx(u,{className:"bg-[#222222] text-white font-medium rounded-full",size:"lg",variant:"secondary",children:"Save"})})]})]})]})}const Z=["High School Diploma","Associate's Degree","Bachelor's Degree","Master's Degree","Doctorate","Professional License","No Formal Education"];function ns(){var r,p,x,h,o,j;const[s,l]=m.useState(!1),[a,c]=m.useState(""),i=v(),{mutate:f}=k(),{id:t}=A(),n=i.getQueryData(["profile",t]);function g(d){d.preventDefault(),f({educationalAttainment:a})}return e.jsxs(P,{children:[e.jsxs(I,{className:`hover:bg-[#e9e9e9] border w-full font-medium ${(r=n==null?void 0:n.data)!=null&&r.user.educationalAttainment?"text-xs":"text-sm"}
           shadow-md flex justify-start items-center pl-4 pr-6 py-8 rounded`,children:[e.jsx("span",{className:"mr-2",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"black",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"})})}),e.jsx("p",{className:"text-gray-600 capitalize",children:(p=n==null?void 0:n.data)!=null&&p.user.educationalAttainment?`Educational attainment: ${(x=n==null?void 0:n.data)==null?void 0:x.user.educationalAttainment}`:"Educational attainment"})]}),e.jsxs(U,{className:"p-8 gap-2",children:[e.jsx(M,{children:e.jsx(L,{className:"text-lg font-semibold",children:(h=n==null?void 0:n.data)!=null&&h.user.educationalAttainment?"Your highest educational attainment":"What is your highest level of education completed?"})}),(o=n==null?void 0:n.data)!=null&&o.user.educationalAttainment?e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"text-sm font-semibold underline capitalize",children:(j=n==null?void 0:n.data)==null?void 0:j.user.educationalAttainment}),e.jsx("div",{className:"flex gap-2 items-center pt-2",children:e.jsx(u,{onClick:()=>{c(""),f({educationalAttainment:""})},className:"bg-gray-950 font-medium rounded-full",size:"lg",children:"Delete"})})]}):e.jsxs("form",{onSubmit:g,className:"flex flex-col",children:[e.jsxs(Ae,{open:s,onOpenChange:l,children:[e.jsx(ze,{asChild:!0,children:e.jsxs(u,{variant:"outline",role:"combobox","aria-expanded":s,className:"gap-2 font-medium w-3/4 mx-auto",children:[a?Z.find(d=>d.toLowerCase()===a.toLowerCase()):"Select attainment",e.jsx(be,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Ve,{className:"p-0",children:e.jsxs(Ee,{children:[e.jsx(Pe,{placeholder:"Search attainment...",className:"h-9"}),e.jsx(Ie,{children:"No attainment found."}),e.jsx(Ue,{children:Z.map(d=>e.jsxs(Me,{value:d,onSelect:N=>{c(N.toLowerCase()===a.toLowerCase()?"":N),l(!1)},children:[d,e.jsx(Ne,{className:` ml-auto h-4 w-4
                   ${a.toLowerCase()===d.toLowerCase()?"opacity-100":"opacity-0"}`})]},d))})]})})]}),e.jsx("div",{className:"flex gap-2 items-center pt-2",children:e.jsx(u,{disabled:!a,className:"bg-gray-950 font-medium rounded-full",size:"lg",children:"Save"})})]})]})]})}const is=S.object({work:S.string().min(1,{message:"This field is required"}).max(20,{message:"Just write a short description about your work"})});function os(){var g,r,p,x,h,o;const{formState:{errors:s},handleSubmit:l,register:a}=_({defaultValues:{work:""},resolver:O(is)}),c=v(),{mutate:i}=k(),{id:f}=A(),t=c.getQueryData(["profile",f]);function n(j){i({work:j.work})}return e.jsxs(P,{children:[e.jsxs(I,{className:`hover:bg-[#e9e9e9] border w-full font-medium ${(g=t==null?void 0:t.data)!=null&&g.user.work?"text-xs":"text-sm"}
           shadow-md flex justify-start items-center pl-4 pr-6 py-8 rounded`,children:[e.jsx("span",{className:"mr-2",children:e.jsx(we,{color:"black",width:25,height:25})}),e.jsx("p",{className:"text-zinc-500",children:(r=t==null?void 0:t.data)!=null&&r.user.work?`My work: ${(p=t==null?void 0:t.data)==null?void 0:p.user.work}`:"My work"})]}),e.jsxs(U,{className:"p-8",children:[e.jsx(M,{children:e.jsx(L,{className:"text-xl text-[#222222]",children:(x=t==null?void 0:t.data)!=null&&x.user.work?"Your current work":"What's your work?"})}),(h=t==null?void 0:t.data)!=null&&h.user.work?e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:(o=t==null?void 0:t.data)==null?void 0:o.user.work}),e.jsx("div",{className:"flex gap-2 items-center pt-2",children:e.jsx(u,{onClick:()=>i({work:""}),className:"bg-[#222222] text-white font-medium rounded-full",size:"lg",variant:"secondary",children:"Delete"})})]}):e.jsxs("form",{onSubmit:l(n),className:"mt-4",children:[e.jsx(T,{className:"text-sm font-medium",htmlFor:"work",children:"Your work"}),e.jsx(W,{...a("work"),type:"text",id:"work",className:"mb-2"}),s.work&&e.jsx(y,{message:s.work.message}),e.jsx("div",{className:"flex gap-2 items-center pt-2",children:e.jsx(u,{className:"bg-[#222222] text-white font-medium rounded-full",size:"lg",variant:"secondary",children:"Save"})})]})]})]})}function cs(){return e.jsxs(e.Fragment,{children:[e.jsx(ns,{}),e.jsx(os,{}),e.jsx(as,{}),e.jsx(ls,{})]})}const ds=Le,ms=Te,us=se,oe=({...s})=>e.jsx(X,{...s});oe.displayName=X.displayName;const ce=m.forwardRef(({className:s,...l},a)=>e.jsx(D,{className:$("fixed inset-0 z-50 bg-white/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 dark:bg-zinc-950/80",s),...l,ref:a}));ce.displayName=D.displayName;const xs=ve("fixed z-50 gap-4 bg-white p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500 dark:bg-zinc-950",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),de=m.forwardRef(({side:s="right",className:l,children:a,...c},i)=>e.jsxs(oe,{children:[e.jsx(ce,{}),e.jsxs(ee,{ref:i,className:$(xs({side:s}),l),...c,children:[a,e.jsxs(se,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-zinc-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-zinc-100 dark:ring-offset-zinc-950 dark:focus:ring-zinc-300 dark:data-[state=open]:bg-zinc-800",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));de.displayName=ee.displayName;const me=({className:s,...l})=>e.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",s),...l});me.displayName="SheetHeader";const ue=({className:s,...l})=>e.jsx("div",{className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...l});ue.displayName="SheetFooter";const xe=m.forwardRef(({className:s,...l},a)=>e.jsx(te,{ref:a,className:$("text-lg font-semibold text-zinc-950 dark:text-zinc-50",s),...l}));xe.displayName=te.displayName;const he=m.forwardRef(({className:s,...l},a)=>e.jsx(ae,{ref:a,className:$("text-sm text-zinc-500 dark:text-zinc-400",s),...l}));he.displayName=ae.displayName;const fe=_e,je=Oe,hs=S.object({username:S.string().min(1,{message:"Invalid username"}).min(5,{message:"Username too short"}).max(15,{message:"Username must be at least 15 characters"})});G.register();function fs({data:s}){var h,o;const[l,a]=m.useState(!1),{mutate:c,isPending:i}=k(),[f,t]=m.useState(""),{register:n,handleSubmit:g,formState:{errors:r},setValue:p}=_({defaultValues:{username:((h=s==null?void 0:s.data)==null?void 0:h.user.username)??""},resolver:O(hs)});async function x(j){var N;const{username:d}=j;if(d===((N=s==null?void 0:s.data)==null?void 0:N.user.username))return t("This is already your current username");await le(b.currentUser,{displayName:d}),c({username:d})}return e.jsxs(re,{open:l,onOpenChange:j=>a(j),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx(T,{className:"font-semibold",htmlFor:"username",children:"Username"}),e.jsx("p",{id:"username",className:`mt-2 ${l?"hidden":""}`,children:(o=s==null?void 0:s.data)==null?void 0:o.user.username})]}),e.jsx(fe,{children:e.jsx("span",{className:"underline font-medium text-sm",children:l?"Cancel":"Edit"})})]}),e.jsx("form",{onSubmit:g(x),children:e.jsxs(je,{children:[e.jsx("span",{className:"text-sm",children:"This is the name on your IGotYou account."}),e.jsx("div",{className:"mt-4 flex gap-2",children:e.jsxs("div",{className:"w-full flex flex-col gap-1",children:[e.jsx(W,{...n("username"),autoFocus:!0}),r.username&&e.jsx(y,{message:r.username.message}),f&&e.jsx(y,{message:f})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{onClick:()=>{t(""),p("username","")},className:"text-xs mt-3 w-max font-semibold bg-[#222222] rounded-full",children:"Clear"}),e.jsx(u,{className:"text-xs mt-3 w-max font-semibold bg-[#222222] rounded-full",children:i?e.jsx("l-dot-pulse",{size:"35",speed:"1.3",color:"white"}):"Save"})]})]})})]})}G.register();function js({data:s}){var j,d,N;const{toast:l}=ke(),[a,c]=m.useState(!1),{mutate:i,isPending:f}=k(),[t,n]=m.useState(""),g=((j=s==null?void 0:s.data)==null?void 0:j.user.email)&&((d=s==null?void 0:s.data)==null?void 0:d.user.email.replace(/^(\w)+/,`${s.data.user.email[0]}***`)),{register:r,handleSubmit:p,formState:{errors:x},setValue:h}=_({defaultValues:{email:(N=s==null?void 0:s.data)==null?void 0:N.user.email},resolver:O(We)});async function o(w){var H;const{email:q}=w;if(q===((H=s==null?void 0:s.data)==null?void 0:H.user.email))return n("This is already your current email address");await qe(b.currentUser,q),await ne(b.currentUser),i({email:q,emailVerified:!1}),l({title:"Success! 🎉",description:"Profile has been updated.",className:"bg-white"}),setTimeout(()=>l({title:"Email verification has been sent",description:"Check your inbox to verify your email.",className:"bg-white"}),1e3)}return e.jsxs(re,{open:a,onOpenChange:w=>c(w),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx(T,{htmlFor:"email",children:"Email"}),e.jsx("p",{id:"email",className:`mt-2 text-sm ${a?"hidden":""}`,children:g})]}),e.jsx(fe,{children:e.jsx("span",{className:"text-sm font-medium underline",children:a?"Cancel":"Edit"})})]}),e.jsx(je,{children:e.jsxs("form",{onSubmit:p(o),children:[e.jsx("span",{className:"text-sm",children:"Use an email address you’ll always have access to."}),e.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[e.jsx("div",{className:"w-full",children:e.jsx(W,{placeholder:"Email address",...r("email")})}),x.email&&e.jsx(y,{message:x.email.message}),t&&e.jsx(y,{message:t})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{onClick:()=>{n(""),h("email","")},className:"mt-3 w-max rounded-full bg-[#222222] text-xs font-semibold",children:"Clear"}),e.jsx(u,{className:"mt-3 w-max rounded-full bg-[#222222] text-xs font-semibold",children:f?e.jsx("l-dot-pulse",{size:"35",speed:"1.3",color:"white"}):"Save"})]})]})})]})}const gs=m.lazy(()=>J(()=>import("./CollapsiblePhoneNumber-9271e46e.js"),["assets/CollapsiblePhoneNumber-9271e46e.js","assets/index-f5f5480a.js","assets/index-09d974ad.css","assets/App-70e4220f.js","assets/App-40b7b6bf.css"]));function ps(){var c,i;const s=v(),{id:l}=A(),a=s.getQueryData(["profile",l]);return e.jsxs(ds,{children:[e.jsx(ms,{asChild:!0,children:e.jsx(u,{className:"mt-2 rounded-full bg-white text-sm font-semibold text-[#222222] shadow-md",variant:"outline",children:"Edit info"})}),e.jsxs(de,{className:"profile-sheet overflow-auto scrollbar-thin scrollbar-thumb-gray-200 scrollbar-thumb-rounded-full",side:"left",children:[e.jsxs(me,{children:[e.jsx(xe,{children:"Edit Personal info"}),e.jsx(he,{children:"Make changes to your profile here. Click save when you're done."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsx(fs,{data:a}),e.jsx(V,{}),e.jsx(js,{data:a}),e.jsx(V,{}),e.jsx(m.Suspense,{fallback:e.jsx("h1",{children:"Loading..."}),children:e.jsx(gs,{data:a})}),!((c=a==null?void 0:a.data)!=null&&c.user.identityVerified)&&e.jsxs(e.Fragment,{children:[e.jsx(V,{}),e.jsx(u,{className:"bg-gray-950",children:e.jsx(ie,{className:"w-full",to:`/users/identity-verification/${(i=a==null?void 0:a.data)==null?void 0:i.user.uid}`,children:"Verify your identity"})})]}),e.jsx(V,{})]}),e.jsx(ue,{children:e.jsx(us,{asChild:!0,children:e.jsx(u,{className:"mt-4 rounded-full bg-gray-950",type:"submit",children:"Close"})})})]})]})}function bs(){const{id:s}=A(),l=v();return Ye({mutationFn:async a=>{try{a.emailVerified?Be.patch("/api/users/current-user/verify-email",{...a}):await ne(b.currentUser)}catch(c){const i=c,f=(i.code.split("/")[1].slice(0,1).toUpperCase()+i.code.split("/")[1].slice(1)).split("-").join(" ");z({title:"Oops! An error occurred.",description:f,variant:"destructive"})}},onSuccess:async(a,{emailVerified:c})=>{c?(z({title:"Success! 🎉",description:"Your email has been verified.",className:"bg-[#FFF]"}),l.invalidateQueries({queryKey:["profile",s]})):z({title:"Verification email has been sent",description:"After verifying your email click the reload button.",className:"bg-[#FFF] "})},onError(a){z({title:"Oops! An error occurred.",description:a.response.data.error,variant:"destructive"})}})}G.register();const Ns=m.lazy(()=>J(()=>import("./Listings-4ccc3002.js"),["assets/Listings-4ccc3002.js","assets/index-f5f5480a.js","assets/index-09d974ad.css","assets/App-70e4220f.js","assets/App-40b7b6bf.css"]));function ws({profileData:s,recentListings:l}){var x,h;const a=v(),{mutate:c,isPending:i,isSuccess:f}=bs(),t=k(),[n,g]=m.useState(""),[r,p]=m.useState();return m.useEffect(()=>{var o;(o=b.currentUser)!=null&&o.emailVerified&&s.emailVerified===!1&&c({emailVerified:!0})},[c,s.emailVerified]),m.useEffect(()=>{var o;g(s==null?void 0:s.photoUrl),t.isSuccess&&a.invalidateQueries({queryKey:["profile",(o=b.currentUser)==null?void 0:o.uid]})},[s==null?void 0:s.photoUrl,a,t.isSuccess]),m.useEffect(()=>{if(r)return;const o=window.cloudinary.createUploadWidget({cloudName:"dop5kqpod",uploadPreset:"s6lymwwh",folder:"IGotYou-Avatars",resourceType:"image",cropping:!0},async(j,d)=>{d.event==="success"&&(t.mutate({photoUrl:d.info.secure_url}),g(d.info.secure_url),le(b.currentUser,{photoURL:d.info.secure_url}))});o&&p(o)},[r,t]),e.jsx(e.Fragment,{children:e.jsxs("section",{className:"mx-auto my-14 flex w-5/6 gap-16 max-lg:flex-col",children:[e.jsxs("div",{className:"flex h-max w-2/4 flex-col justify-between gap-4 max-lg:w-full",children:[e.jsxs(C,{className:"px-22 flex w-full flex-col items-center justify-center py-5 shadow-lg max-lg:w-full",children:[e.jsxs(F,{className:"relative p-4",children:[e.jsxs(Re,{className:"h-[80px] w-[80px]",children:[e.jsx(Ge,{loading:"lazy",className:"max-h-full max-w-full object-cover transition-all hover:scale-105",src:((x=b.currentUser)==null?void 0:x.photoURL)??n??"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.slotcharter.net%2Fwp-content%2Fuploads%2F2020%2F02%2Fno-avatar.png&f=1&nofb=1&ipt=9e90fdb80f5dc7485d14a9754e5441d7fbcadb4db1a76173bf266e3acd9b3369&ipo=images",alt:`${s==null?void 0:s.username}'s avatar`}),e.jsx(He,{children:"CN"})]}),e.jsx(u,{onClick:()=>r==null?void 0:r.open(),type:"button",className:"absolute bottom-2 right-2 z-10 mx-auto rounded-full border bg-zinc-600 px-[0.70rem] py-2 text-center text-zinc-200",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-4 w-4",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})})]}),e.jsxs(Q,{className:"flex flex-col p-0",children:[e.jsx("span",{className:"text-2xl font-bold",children:(s==null?void 0:s.username)??e.jsx(K,{className:"h-4 w-[100px]"})}),e.jsx("span",{className:"text-sm font-bold text-gray-600",children:(s==null?void 0:s.userStatus)==="host"?"Host":"Guest"})]})]}),e.jsxs(C,{className:"w-full shadow-lg max-lg:w-full",children:[e.jsx(F,{children:e.jsx("span",{className:"text-xl font-semibold",children:s!=null&&s.username?(s==null?void 0:s.username)+"'s confirmed information":e.jsx(K,{className:"mx-auto h-4 w-[250px]"})})}),e.jsxs(E,{className:"flex flex-col gap-2",children:[s.identityVerified?e.jsxs("div",{className:"font-medium",children:[e.jsx(Y,{color:"#FFF",width:22,height:22,className:"inline-block rounded-full bg-[#39c152]"})," ",e.jsx("span",{className:"ml-2 text-sm font-semibold text-gray-600",children:"Identity (verified)"})]}):e.jsxs("div",{className:"font-medium",children:[e.jsx(B,{color:"#FFF",width:22,height:22,className:"inline-block rounded-full bg-[#e94242]"})," ",e.jsx("span",{className:"ml-2  text-sm font-semibold text-gray-600",children:"Identity (not verified)"})]}),s!=null&&s.emailVerified?e.jsxs("div",{className:"font-medium",children:[e.jsx(Y,{color:"#FFF",width:22,height:22,className:"inline-block rounded-full bg-[#39c152]"})," ",e.jsx("span",{className:"ml-2 text-sm font-semibold text-gray-600",children:"Email address (verified)"})]}):e.jsxs("div",{className:"font-medium",children:[e.jsx(B,{color:"#FFF",width:22,height:22,className:"inline-block rounded-full bg-[#e94242]"})," ",e.jsx("span",{className:"ml-2 text-sm font-semibold text-gray-600",children:"Email address (not verified)"})]}),s!=null&&s.mobileVerified?e.jsxs("div",{className:"font-medium",children:[e.jsx(Y,{color:"#FFF",width:22,height:22,className:"inline-block rounded-full bg-[#39c152]"})," ",e.jsx("span",{className:"ml-2 text-sm font-semibold text-gray-600",children:"Mobile phone (verified)"})]}):e.jsxs("div",{className:"font-medium",children:[e.jsx(B,{color:"#FFF",width:22,height:22,className:"inline-block rounded-full bg-[#e94242]"})," ",e.jsx("span",{className:"ml-2  text-sm font-semibold text-gray-600",children:"Mobile phone (not verified)"})]})]})]}),e.jsxs(C,{className:"w-full shadow-lg",children:[e.jsxs(F,{className:"px-6 pb-2 pt-6 text-gray-950",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-10 w-10",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5zm6-10.125a1.875 1.875 0 11-3.75 0 1.875 1.875 0 013.75 0zm1.294 6.336a6.721 6.721 0 01-3.17.789 6.721 6.721 0 01-3.168-.789 3.376 3.376 0 016.338 0z"})}),e.jsx("p",{className:"text-lg font-bold",children:s!=null&&s.emailVerified?"Personal info":"Verify your email to edit your personal info"}),e.jsx("p",{className:"text-sm font-semibold text-gray-600",children:"Provide personal details and how we can reach you"})]}),e.jsx(E,{children:s!=null&&s.emailVerified?e.jsx(ps,{}):f&&((h=b.currentUser)==null?void 0:h.emailVerified)==!1?e.jsx(u,{type:"button",className:"ml-2 mt-2 rounded-full  bg-gray-950 text-sm font-semibold",onClick:()=>document.location.reload(),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})})}):e.jsx(u,{onClick:async()=>{var o;return c({emailVerified:(o=b.currentUser)==null?void 0:o.emailVerified})},className:"mt-2 rounded-full  bg-gray-950 text-sm font-semibold",children:i?e.jsx("l-dot-pulse",{size:"30",speed:"1.3",color:"white"}):"Verify email"})})]})]}),e.jsxs("div",{className:"flex w-full flex-col gap-4",children:[e.jsxs(C,{className:"shadow-lg",children:[e.jsx(F,{className:"p-6",children:e.jsx(R,{className:"text-4xl font-semibold text-gray-950",children:"Your profile"})}),e.jsx("div",{className:"px-6 py-2",children:e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"The information you share will be used across IGotYou to help other guests and hosts get to know you."})}),e.jsx(Q,{className:"mt-2 text-[#3c3b3b]",children:e.jsx("div",{className:"grid w-full gap-2 md:grid-cols-1 lg:grid-cols-2 ",children:e.jsx(cs,{})})})]}),(l==null?void 0:l.length)>0||s.listings.length>0?e.jsx(m.Suspense,{fallback:e.jsx(Qe,{}),children:e.jsx(Ns,{recentListings:l,listingsCount:s.listings.length})}):s.emailVerified?e.jsx(e.Fragment,{children:e.jsxs(C,{className:"w-full shadow-lg",children:[e.jsx(F,{children:e.jsx(R,{className:"text-center text-lg font-semibold text-gray-600",children:"You have no listings to show"})}),e.jsx(E,{className:"mx-auto w-max",children:e.jsx(u,{className:"rounded-full bg-gray-950",children:e.jsx(ie,{to:`/become-a-host/${b.currentUser&&b.currentUser.uid}`,children:"Create a listing"})})})]})}):e.jsx(e.Fragment,{children:e.jsxs(C,{className:"w-full shadow-lg",children:[e.jsx(F,{children:e.jsx(R,{className:"text-center text-lg font-semibold text-gray-600",children:"You have no listings to show"})}),e.jsx(E,{className:"mx-auto w-max",children:e.jsxs(Ke,{children:[e.jsx(Ze,{asChild:!0,children:e.jsx(u,{className:"rounded-full bg-gray-950",children:"Subscribe to create"})}),e.jsxs(Je,{children:[e.jsx(Xe,{children:e.jsxs(De,{className:"flex items-center gap-1 font-semibold",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"red",className:"h-7 w-7",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),"You're email is not verified yet."]})}),e.jsx(es,{className:"text-sm font-medium text-gray-600",children:"To create a listing, users are required to have a verified email. Attempting this action without a verified email is useless."}),e.jsx(ss,{children:e.jsx(ts,{className:"rounded-full",children:"Close"})})]})]})})]})})]})]})})}const ks=Object.freeze(Object.defineProperty({__proto__:null,default:ws},Symbol.toStringTag,{value:"Module"}));export{fe as C,ks as P,je as a};
